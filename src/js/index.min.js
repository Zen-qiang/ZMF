"use strict";var queue,animationEnd=function(e){var a={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var i in a)if(void 0!==e.style[i])return a[i]}(document.createElement("div")),preLoad=function(){(queue=new createjs.LoadQueue(!1)).loadManifest([{id:"box1",src:"box_green.svg"},{id:"box2",src:"x_box.svg"},{id:"box3",src:"box_orange.svg"},{id:"box4",src:"box_pink.svg"},{id:"bird_purple",src:"bird_purple.png"},{id:"dialog_box",src:"dialog_box.gif"},{id:"person1",src:"person1.png"},{id:"person2",src:"person2.png"},{id:"person3",src:"person3.png"},{id:"person4",src:"person4.png"},{id:"person5",src:"person5.png"},{id:"person6",src:"person6.png"},{id:"person7",src:"person7.png"},{id:"person8",src:"person8.png"},{id:"person9",src:"person9.png"},{id:"inputBox1",src:"draw.svg"},{id:"inputBox2",src:"lamp_dark.png"},{id:"inputBox3",src:"lamp_light.png"},{id:"mouse",src:"mouse.svg"},{id:"text1",src:"message1.svg"},{id:"text2",src:"message2.svg"},{id:"text3",src:"message3.svg"},{id:"dialog_box1",src:"dialog_box1.gif"},{id:"bird_red",src:"bird_red.png"},{id:"guitar",src:"guitar.png"},{id:"sunglasses",src:"sunglasses.png"},{id:"lamp_light1",src:"lamp_light1.png"},{id:"page3_bg",src:"page3_bg.jpg"},{id:"page3_dnp",src:"page3_dpn.png"},{id:"page3_mby",src:"page3_mby.png"},{id:"page3_wsl",src:"page3_wsl.png"},{id:"page3_gd",src:"page3_gd.png"},{id:"page3_chy",src:"page3_chy.png"},{id:"page4_bird",src:"page4_bird.png"},{id:"page4_lamp",src:"page4_lamp.png"},{id:"page4_box",src:"page4_box.gif"},{id:"page6_box",src:"page6_box.png"},{id:"page6_boxred",src:"page6_boxred.png"},{id:"page6_boxorange",src:"page6_boxorange.png"},{id:"page6_boxblue",src:"page6_boxblue.png"},{id:"page6_box2",src:"page6_box2.png"},{id:"page6_bird",src:"page6_bird.png"},{id:"page6_text",src:"page6_text.gif"},{id:"page7_bg",src:"page7_bg.png"},{id:"page8_bird",src:"page8_bird.png"},{id:"page8_lamp",src:"page8_lamp.png"},{id:"page8_text",src:"page8_text.gif"}],!0,"image/"),queue.on("progress",loadFileProgress),queue.on("complete",loadComplete)};function loadComplete(e){console.log("已加载完毕全部资源"),bgAnimate()}function loadFileProgress(e){console.log("已加载 "+(100*queue.progress|0)+"%"),$(".loading_text").text((100*queue.progress|0)+"%")}function bgAnimate(){var e=$(".h_bg");$(".h_loading").remove(),$(".h_head").remove(),$("img").each(function(){$(this).attr("src",$(this).attr("data-src")).removeAttr("data-src")}),e.addClass("box_enter"),setTimeout(function(){e.removeClass("box_enter").addClass("box_shake")},600),setTimeout(function(){pageplay(".page7")},800)}function pageplay(e){$(e).siblings().css("display","none").end().css("display","block")}$("body").height($(window).height()),$(".page1 .go").on("touchstart",function(){var e=$(".page1 input").val();e&&pageplay(".page2"),$(".user").text(e)}),$(".page2 .go").on("click",function(){pageplay(".page3")}),$(".page3 .go").on("click",function(){pageplay(".page4")}),$(".page4 .go").on("click",function(){pageplay(".page5"),mask_square()}),$(".page6 .go").on("click",function(){pageplay(".page7")}),$(".page7 .go").on("click",function(){pageplay(".page8")}),$(".take_gift .next").on("click",function(){$(".take_gift").addClass("active"),setTimeout(function(){$(".take_gift").css("display","none"),$(".make").css("display","block")},500)}),$(".page8 .share").on("click",function(){pageplay(".page9")});var actorNo=0,actor_timer=null;function marquee(){var e=0,a=setInterval(function(){e++,$(".page5 .bg").toggleClass("active"),9==e&&(clearInterval(a),pageplay(".page6"))},160)}function mask_square(){var e=0,a=0,i=setInterval(function(){29==e?(e=0,a++):e++,2==a?3==e||6==e||20==e?$(".page5 .mask_square span").eq(e).addClass("active"):$(".page5 .mask_square span").eq(e).addClass("active").end().eq(e-1).removeClass("active"):3==a?(clearInterval(i),marquee()):$(".page5 .mask_square span").eq(e).addClass("active").end().eq(e-1).removeClass("active")},70)}$(".page3 .actor").on("click",function(){3<=$(".page3 .actor.active").length||($(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active"),3==$(".page3 .actor.active").length&&($(".page3 .logo").addClass("active"),setTimeout(function(){pageplay(".page4"),$(".page3 .logo").removeClass("active"),$(".page3 .actor").removeClass("active")},1e3)))}),$(".page7 .diy_element li").on("click",function(){var e=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(".diy_element .labels > div").eq(e).addClass("active").siblings().removeClass("active")}),$(".page7 .diy_right li").on("click",function(){if(!$(this).hasClass("active")){var e=$(this).index()+1,a=$(".diy_bg img").attr("src").split(".png")[0].slice(0,-1);$(this).addClass("active").siblings().removeClass("active"),$(".diy_bg img").attr("src",a+e+".png")}});var ZMF=(document,{copyDom:null,events:function(){$(".page7 .labels img").on("touchstart",this.diyStart),$(".page7 .labels img").on("touchmove",this.diyMove),$(".page7 .labels img").on("touchend",this.diyEnd)},diyStart:function(){var e=ZMF,a=$(this)[0].getBoundingClientRect();e.copyDom=$(this).clone();var i={width:a.width+"px",height:a.height+"px",left:a.left+"px",top:a.top+"px"};e.copyDom.css(i).appendTo(".page7")},diyMove:function(e){var a=ZMF,i=e.originalEvent.targetTouches[0],s=parseInt(a.copyDom.css("width"))/2,t=parseInt(a.copyDom.css("height"))/2,o=i.pageX-s+"px",n=i.pageY-t+"px";a.copyDom.css({left:o,top:n})},diyEnd:function(){var e=ZMF,a=$(".page7 .diy_left")[0].getBoundingClientRect(),i=e.copyDom[0].getBoundingClientRect(),s=e.copyDom.attr("class"),t=a.top<=i.top,o=a.left<=i.left,n=a.right>=i.right,p=a.bottom>=i.bottom,g=parseInt(e.copyDom.css("left"))-a.left+"px",r=parseInt(e.copyDom.css("top"))-a.top+"px";t&&o&&n&&p?($(".page7 .diy_content").children("."+s).remove(),e.copyDom.appendTo($(".page7 .diy_content")).css({left:g,top:r})):e.copyDom.remove()}});ZMF.events();